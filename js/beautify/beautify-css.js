function css_beautify(e,n){var i=(n=n||{}).indent_size||4,s=n.indent_char||" ",t=void 0===n.selector_separator_newline||n.selector_separator_newline,r=void 0!==n.end_with_newline&&n.end_with_newline,u=void 0===n.newline_between_rules||n.newline_between_rules;"string"==typeof i&&(i=parseInt(i,10));var a,f=/^\s+$/,p=-1;function c(){return(a=e.charAt(++p))||""}function o(n){var i=p;return n&&h(),result=e.charAt(p+1)||"",p=i-1,c(),result}function l(n){for(var i=p;c();)if("\\"===a)c();else{if(-1!==n.indexOf(a))break;if("\n"===a)break}return e.substring(i,p+1)}function h(){for(var e="";f.test(o());)c(),e+=a;return e}function _(){var e="";for(a&&f.test(a)&&(e=a);f.test(c());)e+=a;return e}function w(n){var i=p;n="/"===o();for(c();c();){if(!n&&"*"===a&&"/"===o()){c();break}if(n&&"\n"===a)return e.substring(i,p)}return e.substring(i,p)+a}function d(n){return e.substring(p-n.length,p).toLowerCase()===n}function g(){for(var n=p+1;n<e.length;n++){var i=e.charAt(n);if("{"===i)return!0;if(";"===i||"}"===i||")"===i)return!1}return!1}var b=e.match(/^[\t ]*/)[0],v=new Array(i+1).join(s),y=0,L=0;var S={"{":function(e){S.singleSpace(),m.push(e),S.newLine()},"}":function(e){S.newLine(),m.push(e),S.newLine()},_lastCharWhitespace:function(){return f.test(m[m.length-1])},newLine:function(e){e||S.trim(),m.length&&m.push("\n"),b&&m.push(b)},singleSpace:function(){m.length&&!S._lastCharWhitespace()&&m.push(" ")},trim:function(){for(;S._lastCharWhitespace();)m.pop()}},m=[];b&&m.push(b);for(var O,A,E,C=!1,N=!1,R="",T="";;){var U=_(),k=""!==U,x=-1!==U.indexOf("\n");T=R,R=a;if(!a)break;if("/"===a&&"*"===o()){var I=d("");S.newLine(),m.push(w()),S.newLine(),I&&S.newLine(!0)}else if("/"===a&&"/"===o())x||"{"===T||S.trim(),S.singleSpace(),m.push(w()),S.newLine();else if("@"===a){k&&S.singleSpace(),m.push(a);var D=(O=": ,;{}()[]/='\"",A=void 0,E=void 0,A=p,E=l(O),p=A-1,c(),E).replace(/\s$/,"");D in css_beautify.NESTED_AT_RULE?(L+=1,D in css_beautify.CONDITIONAL_GROUP_RULE&&(N=!0)):": ".indexOf(D[D.length-1])>=0&&(c(),D=l(": ").replace(/\s$/,""),m.push(D),S.singleSpace())}else"{"===a?"}"===o(!0)?(h(),c(),S.singleSpace(),m.push("{}"),S.newLine(),u&&0===y&&S.newLine(!0)):(y++,b+=v,S["{"](a),N?(N=!1,C=y>L):C=y>=L):"}"===a?(y--,b=b.slice(0,-i),S["}"](a),C=!1,L&&L--,u&&0===y&&S.newLine(!0)):":"===a?(h(),!C&&!N||d("&")||g()?":"===o()?(c(),m.push("::")):m.push(":"):(m.push(":"),S.singleSpace())):'"'===a||"'"===a?(k&&S.singleSpace(),m.push(l(a))):";"===a?(m.push(a),S.newLine()):"("===a?d("url")?(m.push(a),h(),c()&&(")"!==a&&'"'!==a&&"'"!==a?m.push(l(")")):p--)):(k&&S.singleSpace(),m.push(a),h()):")"===a?m.push(a):","===a?(m.push(a),h(),!C&&t?S.newLine():S.singleSpace()):"]"===a?m.push(a):"["===a?(k&&S.singleSpace(),m.push(a)):"="===a?(h(),m.push(a)):(k&&S.singleSpace(),m.push(a))}var $=m.join("").replace(/[\r\n\t ]+$/,"");return r&&($+="\n"),$}css_beautify.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},css_beautify.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0},"function"==typeof define&&define.amd?define([],function(){return{css_beautify:css_beautify}}):"undefined"!=typeof exports?exports.css_beautify=css_beautify:"undefined"!=typeof window?window.css_beautify=css_beautify:"undefined"!=typeof global&&(global.css_beautify=css_beautify);